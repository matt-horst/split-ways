package pages

import (
	"github.com/matt-horst/split-ways/internal/accounting"
	"github.com/matt-horst/split-ways/internal/database"
	"github.com/matt-horst/split-ways/web/components"
	"fmt"
)

templ Group(user database.User, group database.Group, transactions []accounting.Transaction, balances []accounting.Balance) {
	<!DOCTYPE html>
	<html>
		@components.Head("SplitWays")
		<body>
			<main class="card" role="main">
				@components.Navbar(true)
				<h1>{ group.Name }</h1>
                <div class="actions">
                    <a href={ fmt.Sprintf("/groups/%s/create-expense", group.ID.String()) } class="action-btn accent">Create Expense</a>
                    <a href={ fmt.Sprintf("/groups/%s/create-payment", group.ID.String()) } class="action-btn accent">Create Payment</a>
                    if group.Owner == user.ID {
                        <a href={ fmt.Sprintf("/groups/%s/manage", group.ID.String()) } class="action-btn danger">Manage Group</a>
                    }
                </div>
				@components.Summary(balances)
				@components.TransactionsList(user, transactions)
			</main>
			<script>
            const groupID = "{{ group.ID.String() }}"
        </script>
			<script src="/static/group.js" type="module"></script>
		</body>
	</html>
}
